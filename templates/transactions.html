<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="keyword" content="" />
    <meta name="author" content="" />
    <!--! The above 6 meta tags *must* come first in the head; any other head content must come *after* these tags !-->
    <!--! BEGIN: Apps Title-->
    <title>FundsAudit || Dashboard</title>
    <!--! END:  Apps Title-->
    <!--! BEGIN: Favicon-->
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/FundsAuditLogo.png" />
    <!--! END: Favicon-->
    <!--! BEGIN: Bootstrap CSS-->
    <link rel="stylesheet" type="text/css" href="./../assets/css/bootstrap.min.css" />
    <!--! END: Bootstrap CSS-->
    <!--! BEGIN: Vendors CSS-->
    <link rel="stylesheet" type="text/css" href="./../assets/vendors/css/vendors.min.css" />
    <link rel="stylesheet" type="text/css" href="./../assets/vendors/css/tagify.min.css">
    <link rel="stylesheet" type="text/css" href="./../assets/vendors/css/tagify-data.min.css">
    <link rel="stylesheet" type="text/css" href="./../assets/vendors/css/quill.min.css">
    <link rel="stylesheet" type="text/css" href="./../assets/vendors/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="./../assets/vendors/css/select2-theme.min.css">
    <link rel="stylesheet" type="text/css" href="./../assets/vendors/css/daterangepicker.min.css" />
    <!--! END: Vendors CSS-->
    <!--! BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="./../assets/css/theme.min.css" />
    <!--! END: Custom CSS-->
    <!--! HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries !-->
    <!--! WARNING: Respond.js doesn"t work if you view the page via file: !-->
    <!--[if lt IE 9]>
			<script src="https:oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https:oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
</head>

<body>
    <!--! ================================================================ !-->
    <!--! [Start] Navigation Manu !-->
    <!--! ================================================================ !-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <nav class="nxl-navigation">
        <div class="navbar-wrapper">
            <div class="m-header">
                <a href="index.html" class="b-brand">
                    <img src="/assets/images/fundsaudit2.png" alt="" class="logo logo-lg" />
                    <img src="/assets/images/FundsAuditLogo.png" alt="" class="logo logo-sm" />
                </a>
            </div>
            <div class="navbar-content">
                <ul class="nxl-navbar">
                    <li class="nxl-item nxl-caption">
                        <label>Navigation</label>
                    </li>
                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="feather-airplay"></i></span>
                            <span class="nxl-mtext">DASHBOARD</span><span class="nxl-arrow"><i
                                    class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="send-notification.html">DAILY EXPENSE AND
                                    INCOME SUMMARY NOTIFICATION (MORNING)</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification2.html">DAILY EXPENSE AND
                                    INCOME SUMMARY NOTIFICATION (EVENING)</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification3.html">DAILY EXPENSE AND
                                    INCOME SUMMARY NOTIFICATION (NIGHT)</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification4.html">WEEKLY TOTAL
                                    NOTIFICATION</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification5.html">MONTH START GOAL
                                    SETTING NOTIFICATION</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification6.html">WEEKEND
                                    NOTIFICATION</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification7.html">FINANCIAL STATS
                                    NOTIFICATION</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification8.html">OTHER FEATURES &
                                    VERTICALS</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification9.html">MOTIVATION & QUOTES
                                    NOTIFICATION</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification10.html">
                                    OTHERS</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification11.html">
                                    EXPENSE NOTIFICATION</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="send-notification12.html">
                                    INCOME NOTIFICATION</a>
                            </li>
                            <!-- <li class="nxl-item"><a class="nxl-link" href="send-notification.html">Daily Expense and Income summary Notification(Morning)</a>
                            </li> -->
                            <li class="nxl-item"><a class="nxl-link" href="transactions.html">TRANSACTION DETAILS</a>
                            </li>
                            <!-- <li class="nxl-item"><a class="nxl-link" href="website-creation-details.html">Website Creation Details</a></li> -->
                        </ul>
                    </li>
                    <!-- Admin Page Link (Hidden by Default) -->
                    <!-- <li class="nxl-item nxl-hasmenu" id="adminPageLink" style="display: none;">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="feather-settings"></i></span>
                            <span class="nxl-mtext">Admin Page</span><span class="nxl-arrow"><i class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="admin.html">Dashboard Analysis - Edit</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="business-analysis-edit.html">Business Analysis - Edit</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="analysis-edit.html">Performance Analysis - Edit</a></li>
                        </ul>
                    </li> -->
                </ul>

                <div class="card text-center">
                    <div class="card-body">
                        <i class="feather-briefcase fs-4 text-dark"></i>
                        <h6 class="mt-4 text-dark fw-bolder">Welcome to FundsRoom</h6>
                        <p class="fs-11 my-3 text-dark">
                            FundsRoom is your trusted financial partner, offering seamless solutions for managing
                            investments, loans, and business funds with ease.
                        </p>
                        <!-- <a href="https://www.fundsroom.com/" class="btn btn-primary text-dark w-100" style="margin-bottom: 10%;">Fundsroom</a>
                        <a href="https://play.google.com/store/apps/details?id=com.fundsroom.fundsaudit&hl=en_IN" class="btn btn-success text-light w-100">Download FundsAudit</a> -->
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!--! ================================================================ !-->
    <!--! [End]  Navigation Manu !-->
    <!--! ================================================================ !-->
    <!--! ================================================================ !-->
    <!--! [Start] Header !-->
    <!--! ================================================================ !-->
    <header class="nxl-header">
        <div class="header-wrapper">
            <!--! [Start] Header Left !-->
            <div class="header-left d-flex align-items-center gap-4">
                <!--! [Start] nxl-head-mobile-toggler !-->
                <a href="javascript:void(0);" class="nxl-head-mobile-toggler" id="mobile-collapse">
                    <div class="hamburger hamburger--arrowturn">
                        <div class="hamburger-box">
                            <div class="hamburger-inner"></div>
                        </div>
                    </div>
                </a>
                <!--! [Start] nxl-head-mobile-toggler !-->
                <!--! [Start] nxl-navigation-toggle !-->
                <div class="nxl-navigation-toggle">
                    <a href="javascript:void(0);" id="menu-mini-button">
                        <i class="feather-align-left"></i>
                    </a>
                    <a href="javascript:void(0);" id="menu-expend-button" style="display: none">
                        <i class="feather-arrow-right"></i>
                    </a>
                </div>
                <!--! [End] nxl-navigation-toggle !-->
                <!--! [Start] nxl-lavel-mega-menu-toggle !-->
                <!-- <div class="nxl-lavel-mega-menu-toggle d-flex d-lg-none">
                    <a href="javascript:void(0);" id="nxl-lavel-mega-menu-open">
                        <i class="feather-align-left"></i>
                    </a>
                </div> -->
                <!--! [End] nxl-lavel-mega-menu-toggle !-->
                <!--! [Start] nxl-lavel-mega-menu !-->
                <div class="nxl-drp-link nxl-lavel-mega-menu">
                    <div class="nxl-lavel-mega-menu-toggle d-flex d-lg-none">
                        <a href="javascript:void(0)" id="nxl-lavel-mega-menu-hide">
                            <i class="feather-arrow-left me-2"></i>
                            <span>Back</span>
                        </a>
                    </div>

                    <!--! [End] nxl-lavel-mega-menu-wrapper !-->
                </div>
                <!--! [End] nxl-lavel-mega-menu !-->
            </div>
            <!--! [End] Header Left !-->
            <!--! [Start] Header Right !-->
            <div class="header-right ms-auto">
                <div class="d-flex align-items-center">

                    <!-- Full Screen Switcher -->
                    <!-- <div class="nxl-h-item d-none d-sm-flex">
                        <div class="full-screen-switcher">
                            <a href="javascript:void(0);" class="nxl-head-link me-0"
                                onclick="$('body').fullScreenHelper('toggle');">
                                <i class="feather-maximize maximize"></i>
                                <i class="feather-minimize minimize"></i>
                            </a>
                        </div>
                    </div> -->

                    <!-- Dark/Light Theme Toggle -->
                    <div class="nxl-h-item dark-light-theme">
                        <a href="javascript:void(0);" class="nxl-head-link me-0 dark-button">
                            <i class="feather-moon"></i>
                        </a>
                        <a href="javascript:void(0);" class="nxl-head-link me-0 light-button" style="display: none">
                            <i class="feather-sun"></i>
                        </a>
                    </div>

                    <!-- User Dropdown -->
                    <div class="dropdown nxl-h-item">
                        <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button"
                            data-bs-auto-close="outside">
                            <div class="avatar-text avatar-lg bg-gray-200">
                                <i class="feather-user"></i>
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end nxl-h-dropdown nxl-user-dropdown">
                            <div class="dropdown-header">
                                <section id="user-header">
                                    <div id="user-section" class="user-dropdown"><i class="feather-user"></i> Fundsroom
                                        Tech</div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--! [End] Header Right !-->
        </div>
    </header>
    <!--! ================================================================ !-->
    <!--! [End] Header !-->
    <!--! ================================================================ !-->
    <!--! ================================================================ !-->
    <!--! [Start] Main Content !-->
    <!--! ================================================================ !-->
    <main class="nxl-container">
        <div class="nxl-content">
            <!-- [ page-header ] start -->
            <div class="page-header">
                <div class="page-header-left d-flex align-items-center">
                    <div class="page-header-title">
                        <h5 class="m-b-10">DASHBOARD</h5>
                    </div>
                    <ul class="breadcrumb">
                        <!-- <li class="breadcrumb-item"><a href="index.html">Home</a></li> -->
                        <li class="breadcrumb-item">FUNDSAUDIT TRANSACTION DETAILS</li>
                    </ul>
                </div>

            </div>
            <!-- [ page-header ] end -->
            <!-- [ Main Content ] start -->
            <div class="main-content">
                <div class="row">
                    <!-- [Latest Transactions] start -->
                    <div class="col-12">
                        <div class="card stretch stretch-full">
                            <div class="card-header">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h5 class="card-title">Fundsaudit Transaction Details</h5>
                                </div>
                                <div class="card-header-action">
                                    <div data-bs-toggle="tooltip" title="Refresh">
                                        <a href="javascript:void(0);" class="avatar-text avatar-xs bg-warning"
                                            data-bs-toggle="refresh"> </a>
                                    </div>
                                    <div data-bs-toggle="tooltip" title="Maximize/Minimize">
                                        <a href="javascript:void(0);" class="avatar-text avatar-xs bg-success"
                                            data-bs-toggle="expand"> </a>
                                    </div>
                                    <div class="search-bar">
                                        <input type="text" id="searchInput" class="form-control" placeholder="Search..."
                                            oninput="filterTable()">
                                    </div>
                                </div>
                            </div>
                            <div class="card-body custom-card-action p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover mb-0" id="leadsTable">
                                        <thead>
                                            <tr class="border-b">
                                                <th>S No.</th>
                                                <th>ID</th>
                                                <th>Amount</th>
                                                <th>Timestamp</th>
                                                <th>Status</th>
                                                <th>User ID</th>
                                                <th>Name</th>
                                                <th>Payment Mode</th>
                                                <th>Category</th>
                                                <th>Currency</th>
                                                <th>Account No.</th>
                                                <th>Txn ID</th>
                                                <th>Merchant</th>
                                                <th>Txn Date</th>
                                                <th>SMS Date</th>
                                                <th>Txn Type</th>
                                                <th>Bank Name</th>
                                                <th>Account Type</th>
                                                <th>Is Credit</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="d-flex justify-content-between align-items-center">
                                    <ul class="list-unstyled d-flex align-items-center gap-2 mb-0 pagination-common-style"
                                        id="pagination"></ul>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-primary" onclick="printTable()">
                                            <i class="bi bi-printer"></i> Print
                                        </button>
                                        <button class="btn btn-success" onclick="exportToExcel()">
                                            <i class="bi bi-file-earmark-excel"></i> Excel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [ Main Content ] end -->
        </div>
        <!-- [ Footer ] start -->
        <footer class="footer">
            <p class="fs-11 text-muted fw-medium text-uppercase mb-0 copyright">
                <span>Copyright Fundsroom ©</span>
                <script>
                    document.write(new Date().getFullYear());
                </script>
            </p>
            <div class="d-flex align-items-center gap-4">
                <!-- <a href="javascript:void(0);" class="fs-11 fw-semibold text-uppercase">Help</a>
					<a href="javascript:void(0);" class="fs-11 fw-semibold text-uppercase">Terms</a>
					<a href="javascript:void(0);" class="fs-11 fw-semibold text-uppercase">Privacy</a> -->
            </div>
        </footer>
        <!-- [ Footer ] end -->
    </main>
    <!--! ================================================================ !-->
    <!--! [End] Main Content !-->
    <!--! ================================================================ !-->

    <!--! ================================================================ !-->
    <!--! Footer Script !-->
    <!--! ================================================================ !-->
    <!--! BEGIN: Vendors JS !-->
    <script src="./../assets/vendors/js/vendors.min.js"></script>
    <!-- vendors.min.js {always must need to be top} -->
    <script src="./../assets/vendors/js/daterangepicker.min.js"></script>
    <script src="./../assets/vendors/js/apexcharts.min.js"></script>
    <script src="./../assets/vendors/js/circle-progress.min.js"></script>
    <script src="./../assets/vendors/js/jquery.calendar.min.js"></script>
    <script src="./../assets/vendors/js/tagify.min.js"></script>
    <script src="./../assets/vendors/js/tagify-data.min.js"></script>
    <script src="./../assets/vendors/js/quill.min.js"></script>
    <script src="./../assets/vendors/js/select2.min.js"></script>
    <script src="./../assets/vendors/js/select2-active.min.js"></script>
    <!--! END: Vendors JS !-->
    <!--! BEGIN: Apps Init  !-->
    <script src="./../assets/js/common-init.min.js"></script>
    <!-- <script src="./../assets/js/dashboard-init.min.js"></script> -->
    <!-- <script src="./../assets/js/reports-project-init.min.js"></script> -->
    <!-- <script src="./../assets/js/widgets-miscellaneous-init.min.js"></script> -->
    <!--! END: Apps Init !-->
    <!--! BEGIN: Theme Customizer  !-->
    <script src="./../assets/js/theme-customizer-init.min.js"></script>
    <!--! END: Theme Customizer !-->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        // Force reload on back button navigation (important for session checks)
        window.addEventListener('pageshow', function (event) {
            if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
                window.location.reload();
            }
        });

        window.onload = function () {
            const loggedIn = sessionStorage.getItem("loggedIn");

            if (loggedIn !== "true") {
                Swal.fire({
                    icon: 'error',
                    title: 'Access Denied',
                    text: 'You must be logged in to access this page.',
                    confirmButtonText: 'Login',
                    allowOutsideClick: false
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = "index.html";
                    }
                });
            }
        };

        $(document).ready(function () {
            const rowsPerPage = 25;
            let currentPage = 1;
            let tableData = [];

            function fetchData() {
                $.ajax({
                    url: "https://lc8j8r2xza.execute-api.ap-south-1.amazonaws.com/prod/transactions/getAll/all?from=2025-07-01T00:00:00Z&to=2025-07-04T23:59:59Z",
                    method: "GET",
                    success: function (response) {
                        tableData = response.map((item, index) => ({
                            sno: index + 1,
                            ...item
                        }));
                        renderTable();
                        renderPagination();
                    },
                    error: function (err) {
                        console.error("Error fetching data:", err);
                    }
                });
            }

            function renderTable() {
                const tbody = $("#leadsTable tbody");
                tbody.empty();
                const start = (currentPage - 1) * rowsPerPage;
                const end = start + rowsPerPage;
                const rows = tableData.slice(start, end);

                rows.forEach((row) => {
                    const tr = `<tr>
                    <td>${row.sno}</td>
                    <td>${row.id}</td>
                    <td>${row.amount}</td>
                    <td>${row.timestamp}</td>
                    <td>${row.status}</td>
                    <td>${row.user_id}</td>
                    <td>${row.name}</td>
                    <td>${row.mode_of_payment}</td>
                    <td>${row.category || '--'}</td>
                    <td>${row.currency}</td>
                    <td>${row.account_number}</td>
                    <td>${row.txnid || '--'}</td>
                    <td>${row.merchant}</td>
                    <td>${row.txndate}</td>
                    <td>${row.smsdate}</td>
                    <td>${row.txntype}</td>
                    <td>${row.bankname}</td>
                    <td>${row.accounttype}</td>
                    <td>${row.isCredit ? 'Yes' : 'No'}</td>
                </tr>`;
                    tbody.append(tr);
                });
            }

            function renderPagination() {
                const totalPages = Math.ceil(tableData.length / rowsPerPage);
                const pagination = $("#pagination");
                pagination.empty();

                const visiblePageCount = 3;
                let startPage = Math.max(currentPage - 1, 1);
                let endPage = startPage + visiblePageCount - 1;
                if (endPage > totalPages) {
                    endPage = totalPages;
                    startPage = Math.max(endPage - visiblePageCount + 1, 1);
                }

                const prevDisabled = currentPage === 1 ? 'disabled' : '';
                const nextDisabled = currentPage === totalPages ? 'disabled' : '';

                pagination.append(`<li><a href="javascript:void(0);" class="${prevDisabled}" onclick="changePage(${currentPage - 1})">&laquo;</a></li>`);
                for (let i = startPage; i <= endPage; i++) {
                    const active = i === currentPage ? "active" : "";
                    pagination.append(`<li><a href="javascript:void(0);" class="${active}" onclick="changePage(${i})">${i}</a></li>`);
                }
                pagination.append(`<li><a href="javascript:void(0);" class="${nextDisabled}" onclick="changePage(${currentPage + 1})">&raquo;</a></li>`);
            }

            window.changePage = function (page) {
                const totalPages = Math.ceil(tableData.length / rowsPerPage);
                if (page < 1 || page > totalPages) return;
                currentPage = page;
                renderTable();
                renderPagination();
            };

            window.filterTable = function () {
                const value = $("#searchInput").val().toLowerCase();
                if (!value) {
                    renderTable();
                    renderPagination();
                    return;
                }

                const filtered = tableData.filter((row) =>
                    Object.values(row).some((field) =>
                        String(field).toLowerCase().includes(value)
                    )
                );

                const tbody = $("#leadsTable tbody");
                tbody.empty();
                filtered.forEach((row, index) => {
                    const tr = `<tr>
                    <td>${index + 1}</td>
                    <td>${row.id}</td>
                    <td>${row.amount}</td>
                    <td>${row.timestamp}</td>
                    <td>${row.status}</td>
                    <td>${row.user_id}</td>
                    <td>${row.name}</td>
                    <td>${row.mode_of_payment}</td>
                    <td>${row.category || '--'}</td>
                    <td>${row.currency}</td>
                    <td>${row.account_number}</td>
                    <td>${row.txnid || '--'}</td>
                    <td>${row.merchant}</td>
                    <td>${row.txndate}</td>
                    <td>${row.smsdate}</td>
                    <td>${row.txntype}</td>
                    <td>${row.bankname}</td>
                    <td>${row.accounttype}</td>
                    <td>${row.isCredit ? 'Yes' : 'No'}</td>
                </tr>`;
                    tbody.append(tr);
                });
                $("#pagination").hide();
            };

            window.printTable = function () {
                const printWindow = window.open('', '', 'height=600,width=800');
                printWindow.document.write('<html><head><title>Print Table</title>');
                printWindow.document.write('</head><body>');
                printWindow.document.write($("#leadsTable")[0].outerHTML);
                printWindow.document.write('</body></html>');
                printWindow.document.close();
                printWindow.print();
            };

            window.exportToExcel = function () {
                const table = document.getElementById("leadsTable");
                const rows = table.querySelectorAll("tr");
                const data = [];
                rows.forEach((row) => {
                    const rowData = [];
                    row.querySelectorAll("th, td").forEach((cell) => {
                        rowData.push(cell.innerText);
                    });
                    data.push(rowData);
                });

                const worksheet = XLSX.utils.aoa_to_sheet(data);
                const workbook = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(workbook, worksheet, "Transactions");
                XLSX.writeFile(workbook, "TransactionDetails.xls");
            };

            fetchData();
        });
    </script>

    <script>
        window.addEventListener("contextmenu", function (e) {
            e.preventDefault();
        });

        let devAccessGranted = false;

        window.addEventListener("keydown", function (e) {
            const isCtrl = e.ctrlKey;
            const isShift = e.shiftKey;
            const isAlt = e.altKey;
            const key = e.key.toLowerCase();

            if (isCtrl && isAlt && isShift && key === "i") {
                devAccessGranted = true;
                alert("Developer access granted. Now you can open DevTools.");
                return;
            }

            if (
                !devAccessGranted &&
                (
                    e.keyCode === 123 ||
                    (isCtrl && isShift && (key === "i" || key === "j")) ||
                    (isCtrl && key === "u")
                )
            ) {
                e.preventDefault();
            }
        }, true);
    </script>

</body>

</html>